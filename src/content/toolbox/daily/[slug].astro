---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getEntryBySlug } from 'astro:content';
import { Astro } from 'astro';

const { slug } = Astro.params;
const post = await getEntryBySlug('microlessons', slug);
if (!post) throw new Error(`Microlesson not found for slug: ${slug}`);
---
<BaseLayout>
  <article class="prose prose-invert max-w-3xl mx-auto py-10">
    <h1>{post.data.title}</h1>
    <p class="text-gray-400">{post.data.date}</p>
    <div set:html={post.body} />
    <script type="module" src="/scripts/track-completion.js"></script>
  </article>
</BaseLayout>
